<div class="w-auto md:p-8 p-4">
    <!-- Inside Page -->
    <div class="w-full md:px-4 px-0 pb-8 pt-2 bg-white shadow-2 rounded-lg text-lg text-gray-600 font-medium" v-if="loaded==200">
        <!-- Table Header -->
        <Single-Page-Header :title="'تعديل بيانات متعهد التموين: ' + formData.name" url="/admin/caterer/" urlLabel="قائمة متعهدي التموين"></Single-Page-Header>
        <!-- End Table Header -->

        <!-- Grid for all caterer fields -->
        <div class="grid lg:grid-cols-3 md:grid-cols-2 sm:grid-cols-1 gap-x-4">

            <!-- =================== البيانات الأساسية =================== -->
            <div class="lg:col-span-3 md:col-span-2 sm:col-span-1 text-xl cairo font-semibold border-b pb-2 mt-8 mb-2">
                البيانات الأساسية
            </div>

            <!-- اسم التشاركية -->
            <div class='w-full px-2 py-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>الاسم التجاري <span class="text-red-500 mr-1">*</span></div>
                <input type='text' v-model='formData.name' class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
            </div>

            <!-- المدينة -->
            <div class='w-full px-2 py-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>المدينة <span class="text-red-500 mr-1">*</span></div>
                <select v-model="formData.city_id" class="h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base">
                    <option :value="null" disabled>-- اختر مدينة --</option>
                    <option v-for="city in cityList" :key="city.id" :value="city.id">{{ city.name }}</option>
                </select>
            </div>

            <!-- الوصف -->
            <div class='w-full px-2 py-2 lg:col-span-3 md:col-span-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>نبذة تعريفية (الوصف)</div>
                <textarea v-model='formData.description' class='min-h-[100px] py-2 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'></textarea>
            </div>

            <!-- =================== بيانات التواصل والموقع =================== -->
            <div class="lg:col-span-3 md:col-span-2 sm:col-span-1 text-xl cairo font-semibold border-b pb-2 mt-8 mb-2">
                بيانات التواصل والموقع
            </div>

            <!-- العنوان -->
            <div class='w-full px-2 py-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>العنوان التفصيلي</div>
                <input type='text' v-model='formData.address' class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
            </div>
            <!-- الهاتف -->
            <div class='w-full px-2 py-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>رقم الهاتف</div>
                <input type='text' v-model='formData.phone' class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
            </div>
            <!-- واتساب -->
            <div class='w-full px-2 py-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>رقم واتساب</div>
                <input type='text' v-model='formData.whatsapp' class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
            </div>
            <!-- خط العرض -->
            <div class='w-full px-2 py-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>خط العرض (Latitude)</div>
                <input type='text' v-model='formData.latitude' class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
            </div>
            <!-- خط الطول -->
            <div class='w-full px-2 py-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>خط الطول (Longitude)</div>
                <input type='text' v-model='formData.longitude' class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
            </div>

            <!-- =================== سياسات الحجز والعمل =================== -->
            <div class="lg:col-span-3 md:col-span-2 sm:col-span-1 text-xl cairo font-semibold border-b pb-2 mt-8 mb-2">
                سياسات الحجز والعمل
            </div>

            <!-- أقل عدد أيام للحجز -->
            <div class='w-full px-2 py-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>أقل مدة للحجز (يوم)</div>
                <input type='number' v-model='formData.min_booking_days_before' class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
            </div>
            <!-- الحد الأدنى لقيمة الطلب -->
            <div class='w-full px-2 py-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>الحد الأدنى لقيمة الطلب</div>
                <input type='number' v-model='formData.min_order_value' class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
            </div>
            <!-- نسبة العربون -->
            <div class='w-full px-2 py-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>نسبة العربون (%)</div>
                <input type='number' v-model='formData.deposit_percentage' class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
            </div>
            <!-- أقل عدد ضيوف -->
            <div class='w-full px-2 py-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>أقل عدد ضيوف</div>
                <input type='number' v-model='formData.min_guests' class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
            </div>
            <!-- أقصى عدد ضيوف -->
            <div class='w-full px-2 py-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>أقصى عدد ضيوف</div>
                <input type='number' v-model='formData.max_guests' class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
            </div>
            <!-- سياسة الإلغاء -->
            <div class='w-full px-2 py-2 lg:col-span-3 md:col-span-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>سياسة إلغاء الحجز</div>
                <textarea v-model='formData.cancellation_policy' class='min-h-[100px] py-2 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'></textarea>
            </div>

            <!-- =================== سياسات التذوق =================== -->
            <div class="lg:col-span-3 md:col-span-2 sm:col-span-1 text-xl cairo font-semibold border-b pb-2 mt-8 mb-2">
                سياسات التذوق
            </div>

            <!-- حقول التذوق -->
       <!-- حقول التذوق (بالشكل المحسن) -->
<div class="lg:col-span-3 md:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-y-4 gap-x-6 px-2 py-4">
    
    <!-- مفتاح التبديل الأول: هل تقدم جلسات تذوق؟ -->
    <label for="offers_tasting_sessions" class="flex items-center justify-between cursor-pointer">
        <span class="text-base text-gray-700">هل تقدم جلسات تذوق بشكل عام؟</span>
        <div class="relative">
            <input type="checkbox" id="offers_tasting_sessions" class="sr-only" v-model="formData.offers_tasting_sessions">
            <div class="block w-14 h-8 rounded-full" :class="formData.offers_tasting_sessions ? 'bg-green-500' : 'bg-gray-300'"></div>
            <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform"
                 :class="{ 'translate-x-6': formData.offers_tasting_sessions }"></div>
        </div>
    </label>

    <!-- مفتاح التبديل الثاني: هل تتيح الحجز عبر التطبيق؟ -->
    <label for="offers_tasting_booking" class="flex items-center justify-between cursor-pointer">
        <span class="text-base text-gray-700">هل تتيح حجز تذوق عبر التطبيق؟</span>
        <div class="relative">
            <input type="checkbox" id="offers_tasting_booking" class="sr-only" v-model="formData.offers_tasting_booking">
            <div class="block w-14 h-8 rounded-full" :class="formData.offers_tasting_booking ? 'bg-green-500' : 'bg-gray-300'"></div>
            <div class="dot absolute left-1 top-1 bg-white w-6 h-6 rounded-full transition-transform"
                 :class="{ 'translate-x-6': formData.offers_tasting_booking }"></div>
        </div>
    </label>

</div>
            <!-- سياسة التذوق -->
            <div class='w-full px-2 py-2 lg:col-span-3 md:col-span-2'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>شرح سياسة التذوق</div>
                <textarea v-model='formData.tasting_policy' class='min-h-[100px] py-2 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'></textarea>
            </div>

            <!-- =================== الصور =================== -->
            <div class="lg:col-span-3 md:col-span-2 sm:col-span-1 text-xl cairo font-semibold border-b pb-2 mt-8 mb-2">
                الصور
            </div>

            <!-- الشعار -->
            <div class='w-full px-2 py-4'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>تغيير الشعار (Logo)</div>
                <input type="file" @change="onChangeLogo" accept="image/*" class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
                <div class="mt-4">
                    <p class="text-sm mb-2">المعايـنة:</p>
                    <img :src="previewLogo || formData.logo" class="w-40 h-40 object-contain rounded border p-1" />
                </div>
            </div>

            <!-- صورة الغلاف -->
            <div class='w-full px-2 py-4'>
                <div class='h-9 flex items-center text-gray-500 mr-2 text-sm'>تغيير صورة الغلاف</div>
                <input type="file" @change="onChangeCover" accept="image/*" class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
                <div class="mt-4">
                    <p class="text-sm mb-2">المعايـنة:</p>
                    <img :src="previewCover || formData.cover_photo" class="w-64 h-40 object-cover rounded border p-1" />
                </div>
            </div>

        </div>
        <!-- End Grid -->

        <!-- Btn Action -->
        <div class="w-full lg:h-20 mt-12 lg:flex items-center justify-start text-sm cairo">
            <div @click="updateCaterer"
                class="h-12 px-6 mx-4 my-2 bg-green-500 hover:bg-green-600 flex items-center justify-center text-white shadow-lg rounded cursor-pointer">
                <i class="fas fa-save ml-2"></i>
                حفظ التعديلات
            </div>
        </div>
        <!-- End Btn Action -->
    </div>

    <Empty-Box v-if="loaded == 204" message="لا يوجد متعهد تموين بهذا الرقم"></Empty-Box>
    <Bad-Request v-if="loaded==400" :reload="reload" :message="errorMessage"></Bad-Request>
    <No-Permission v-if="loaded==403" :message="errorMessage"></No-Permission>
    <No-Internet v-if="loaded==404" :reload="reload"></No-Internet>
</div>
