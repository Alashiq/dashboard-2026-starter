<div class="w-auto md:p-8 p-4">
    <!-- Inside Page -->
    <div v-if="loaded == 200" class="w-full md:px-4 px-0 pb-8 pt-2 bg-white shadow-2 rounded-lg text-lg text-gray-600 font-medium">

        <!-- Page Header -->
        <Single-Page-Header title="إضافة منتج جديد" url="/admin/product/" urlLabel="قائمة المنتجات"></Single-Page-Header>
        <!-- End Page Header -->

        <!-- Grid Form -->
        <div class="grid lg:grid-cols-3 md:grid-cols-1 gap-x-6 mt-8">

            <!-- Left Column: Main Fields -->
            <div class="lg:col-span-2 grid grid-cols-1 gap-y-4">
                <!-- اسم المنتج -->
                <div>
                    <label class='block h-9 flex items-center text-gray-500 text-sm'>اسم المنتج <span class="text-red-500 mr-1">*</span></label>
                    <input type='text' v-model='formData.name' placeholder="مثال: طبق مشاوي مشكل" class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
                </div>

                <!-- الوصف -->
                <div>
                    <label class='block h-9 flex items-center text-gray-500 text-sm'>وصف المنتج</label>
                    <textarea v-model='formData.description' placeholder="اكتب وصفًا جذابًا للمنتج..." class='min-h-[120px] py-2 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'></textarea>
                </div>

                <!-- المكونات -->
                <div>
                    <label class='block h-9 flex items-center text-gray-500 text-sm'>المكونات</label>
                    <textarea v-model='formData.ingredients' placeholder="مثال: لحم, دجاج, أرز, بهارات..." class='min-h-[80px] py-2 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'></textarea>
                </div>

                <!-- كلمات دلالية -->
                <div>
                    <label class='block h-9 flex items-center text-gray-500 text-sm'>كلمات دلالية (افصل بينها بفاصلة ,)</label>
                    <input type='text' v-model='formData.keywords' placeholder="مثال: مشاوي, كباب, وليمة" class='h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base'>
                </div>
            </div>

            <!-- Right Column: Photo and Caterer -->
            <div class="lg:col-span-1 grid grid-cols-1 gap-y-4 mt-4 lg:mt-0">
                <!-- صورة المنتج -->
                <div>
                    <label class='block h-9 flex items-center text-gray-500 text-sm'>صورة المنتج</label>
                    <div class="w-full h-56 border-2 border-dashed rounded-lg flex items-center justify-center bg-gray-50 relative">
                        <img v-if="previewPhoto" :src="previewPhoto" class="h-full w-full object-contain rounded-lg p-2" />
                        <div v-else class="text-center text-gray-400">
                            <i class="fas fa-image text-4xl"></i>
                            <p class="mt-2">اسحب الصورة إلى هنا أو انقر للاختيار</p>
                        </div>
                        <input type="file" @change="onChangePhoto" accept="image/*" ref="photoInput" class='absolute top-0 left-0 w-full h-full opacity-0 cursor-pointer'>
                    </div>
                </div>

                <!-- متعهد التموين -->
                <div>
                    <label class='block h-9 flex items-center text-gray-500 text-sm'>ربط بمتعهد تموين (اختياري)</label>
                    <select v-model="formData.caterer_id" class="h-12 w-full rounded border border-gray-200 bg-gray-50 px-4 text-base">
                        <option :value="null">-- منتج عام (غير مرتبط) --</option>
                        <option v-for="caterer in catererList" :key="caterer.id" :value="caterer.id">{{ caterer.name }}</option>
                    </select>
                    <p class="text-xs text-gray-400 mt-1 px-1">إذا لم تختر متعهد، سيتم اعتبار المنتج عامًا ومتاحًا للجميع.</p>
                </div>
            </div>
        </div>
        <!-- End Grid Form -->

        <!-- Action Part -->
        <div class="flex items-center h-20 mt-8">
            <Btn-Submit-New-Item label="إضافة المنتج" :submit="addNewProduct"></Btn-Submit-New-Item>
        </div>
    </div>

    <!-- Loading and Error States -->
    <Empty-Box v-if="loaded == 204" message="لم نتمكن من جلب البيانات اللازمة (مثل قائمة متعهدي التموين)"></Empty-Box>
    <Bad-Request v-if="loaded==400" :reload="reload" :message="errorMessage"></Bad-Request>
    <No-Permission v-if="loaded==403" :message="errorMessage"></No-Permission>
    <No-Internet v-if="loaded==404" :reload="reload"></No-Internet>
</div>
